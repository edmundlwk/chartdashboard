FusionCharts.ready(function(){var App,dom,chartDataSource,dashboards,viewHelpers,eventStates,chartConfig,startYear='2014',currentYear='2014',DOCUMENT=document,ChartsInModal={},activeModalChart=[],ieVersion=getIEVersion(),ie6=isIE6();chartConfig={yearlySalesSummary:{type:'MSCombiDY2D',id:'yearlySalesSummary',width:'473',height:'340',dataFormat:'json',renderAt:'yearly-sales-chart',dataSource:{chart:{xAxisName:'Year',theme:'management',numberPrefix:'$',pyAxisName:'Revenue (US $ in thousands)',sYaxisName:'Units sold (in thousands)'},categories:[{category:[{label:'2012'},{label:'2013'},{label:'2014'}]}],dataset:[{seriesName:'Revenue',renderAs:'column',showValues:'0',data:[{value:'682796'},{value:'1248078'},{value:'1160327'}]},{seriesName:'Units Sold',parentYAxis:'S',renderAs:'line',showValues:'0',data:[{value:'25007'},{value:'43710'},{value:'38616'}]}]}},topSalesPerformersSummary:{type:'MSCombiDY2D',id:'topSalesPerformersSummary',width:'473',height:'340',dataFormat:'json',renderAt:'top-sales-performers-chart',dataSource:{chart:{numberPrefix:'$',xAxisName:'Performers',pYAxisName:'Sales (US $ in thousands)',sYAxisName:'Units sold (in thousands)',theme:'management'},categories:[{category:[]}],dataset:[{seriesName:'Sales',renderAs:'column',showValues:'0',data:[]},{seriesName:'Units Sold',renderAs:'line',showValues:'0',parentYAxis:'S',data:[]}]}},topProductsSummary:{type:'MSCombiDY2D',id:'topProductsSummary',width:'968',height:'340',dataFormat:'json',renderAt:'top-products-chart',dataSource:{chart:{numberPrefix:'$',xAxisName:'Products',pYAxisName:'Price (US $ in thousands)',sYAxisName:'Units Sold',theme:'management'},categories:[{category:[]}],dataset:[{seriesName:'Price',renderAs:'column',showValues:'0',data:[]},{seriesName:'Units Sold',renderAs:'line',showValues:'0',parentYAxis:'S',data:[]}]}},topRevenuesCountriesSummary:{type:'MSCombiDY2D',id:'topRevenuesCountriesSummary',width:'473',height:'340',dataFormat:'json',renderAt:'top-revenues-countries-chart',dataSource:{chart:{numberPrefix:'$',xAxisName:'Countries',pYAxisName:'Sales (US $ in thousands)',sYAxisName:'Units sold (in thousands)',theme:'management'},categories:[{category:[]}],dataset:[{seriesName:'Sales',renderAs:'column',showValues:'0',data:[]},{seriesName:'Units Sold',renderAs:'line',showValues:'0',parentYAxis:'S',data:[]}]}},topRevenuesCitiesSummary:{type:'bar2d',id:'topRevenuesCitiesSummary',width:'473',height:'340',dataFormat:'json',renderAt:'top-revenues-cities-chart',dataSource:{chart:{yAxisName:'Total Sales (US $ in thousands)',theme:'management'},data:[]}},topCategoriesSalesTab:{type:'bar2d',id:'topCategoriesSalesTab',width:'473',height:'340',dataFormat:'json',renderAt:'top-categories-sales-tab-chart',dataSource:{chart:{numberPrefix:'$',xAxisName:'Product Categories',YAxisName:'Revenue (US $ in thousands)',theme:'management'},data:[]}},topPerformersSalesTab:{type:'column2D',id:'topPerformersSalesTab',width:'473',height:'340',dataFormat:'json',renderAt:'top-performers-sales-tab-chart',dataSource:{chart:{xAxisName:'Performers',yAxisName:'Revenue (US $ in thousands)',theme:'management'},data:[]}},topMonthlySalesTab:{type:'MSCombiDY2D',id:'topMonthlySalesTab',width:'968',height:'340',dataFormat:'json',renderAt:'top-monthly-sales-tab-chart',dataSource:{chart:{numberPrefix:'$',xAxisName:'Month',pYAxisName:'Sales (US $ in thousands)',sYAxisName:'Units Sold (in thousands)',theme:'management',lineThickness:'2'},categories:[{category:[]}],dataset:[{seriesName:'Beverages',renderAs:'line',showValues:'0',data:[]},{seriesName:'Condiments',renderAs:'line',showValues:'0',data:[]},{seriesName:'Confections',renderAs:'line',showValues:'0',data:[]},{seriesName:'Dairy Products',renderAs:'line',showValues:'0',data:[]},{seriesName:'Grains / Cereals',renderAs:'line',showValues:'0',data:[]},{seriesName:'Meat / Poultry',renderAs:'line',showValues:'0',data:[]},{seriesName:'Produce',renderAs:'line',showValues:'0',data:[]},{seriesName:'Seafood',renderAs:'line',showValues:'0',data:[]},{seriesName:'Total Units Sold',renderAs:'line',showValues:'0',parentYAxis:'S',color:'#052829',dashed:'1',data:[]}]}},categoryWiseSales:{type:'MSCombiDY2D',dataFormat:'json',dataSource:{chart:{numberPrefix:'$',xAxisName:'Products',pYAxisName:'Revenue (US $ in thousands)',sYAxisName:'Units Sold',theme:'management'},categories:[{category:[]}],dataset:[{seriesName:'Revenue',renderAs:'column',showValues:'0',data:[]},{seriesName:'Units Sold',renderAs:'line',showValues:'0',parentYAxis:'S',data:[]}]}},singleSalePerformerSalesTab:{type:'MSCombiDY2D',id:'singleSalePerformerSalesTab',width:'473',height:'340',dataFormat:'json',dataSource:{chart:{numberPrefix:'$',xAxisName:'Year',pYAxisName:'Amount (US $ in thousands)',sYAxisName:'No. of orders',theme:'management'},categories:[{category:[]}],dataset:[{seriesName:'Amount',renderAs:'column',showValues:'0',data:[]},{seriesName:'No. of orders',renderAs:'line',showValues:'0',parentYAxis:'S',data:[]}]}},NASales:{type:'northamerica',renderAt:'north-america-sales-chart',id:'NASales',width:'100%',height:'400',dataFormat:'json',dataSource:{chart:{theme:'management'},colorrange:{minvalue:'1000',code:'F5F5F5',color:[{minvalue:'1000',maxvalue:'25000',displayvalue:'Poor',code:'e11800'},{minvalue:'25000',maxvalue:'45000',displayvalue:'Average',code:'eed800'},{minvalue:'45000',maxvalue:'235000',displayvalue:'Good',code:'99cf1b'}]},data:[]}},SASales:{type:'southamerica',renderAt:'south-america-sales-chart',id:'SASales',width:'100%',height:'400',dataFormat:'json',dataSource:{chart:{theme:'management'},colorrange:{minvalue:'1000',code:'F5F5F5',color:[{minvalue:'1000',maxvalue:'25000',displayvalue:'Poor',code:'dd0017'},{minvalue:'25000',maxvalue:'45000',displayvalue:'Average',code:'f8e71c'},{minvalue:'45000',maxvalue:'235000',displayvalue:'Good',code:'75ca40'}]},data:[]}},europeSales:{type:'europe',renderAt:'europe-sales-chart',id:'europeSales',width:'100%',height:'400',dataFormat:'json',dataSource:{chart:{theme:'management'},colorrange:{color:[{minvalue:'1000',maxvalue:'25000',displayvalue:'Poor',code:'dd0017'},{minvalue:'25000',maxvalue:'45000',displayvalue:'Average',code:'f8e71c'},{minvalue:'45000',maxvalue:'235000',displayvalue:'Good',code:'75ca40'}]},data:[]}},topCitiesSales:{type:'MSCombiDY2D',id:'topCitiesSales',width:'473',height:'340',dataFormat:'json',dataSource:{chart:{numberPrefix:'$',xAxisName:'City',pYAxisName:'Sales (US $ in thousands)',sYAxisName:'Units sold (in thousands)',theme:'management'},categories:[{category:[]}],dataset:[{seriesName:'Sales',renderAs:'column',showValues:'0',data:[]},{seriesName:'Units Sold',renderAs:'line',showValues:'0',parentYAxis:'S',data:[]}]}},topCitiesCustomers:{type:'MSCombiDY2D',id:'topCitiesCustomers',width:'473',height:'340',dataFormat:'json',dataSource:{chart:{numberPrefix:'$',xAxisName:'Customer',pYAxisName:'Sales (US $ in thousands)',sYAxisName:'Units sold (in thousands)',theme:'management'},categories:[{category:[]}],dataset:[{seriesName:'Sales',renderAs:'column',showValues:'0',data:[]},{seriesName:'Units Sold',renderAs:'line',showValues:'0',parentYAxis:'S',data:[]}]}},inventoryByProductCategories:{type:'MSCombiDY2D',id:'inventoryByProductCategories',width:'473',height:'340',dataFormat:'json',renderAt:'inventory-by-product-categories-chart',dataSource:{chart:{numberPrefix:'$',xAxisName:'Product Category',pYAxisName:'Cost of Inventory',sYAxisName:'Units in Inventory',theme:'management'},categories:[{category:[]}],dataset:[{seriesName:'Cost of Inventory',renderAs:'column',showValues:'0',data:[]},{seriesName:'Units in Inventory',renderAs:'line',showValues:'0',parentYAxis:'S',data:[]}]}},costOfGoodsSold:{type:'stackedcolumn2d',id:'costOfGoodsSold',renderAt:'cost-of-goods-sold-chart',width:'473',height:'340',dataFormat:'json',dataSource:{chart:{'xAxisName':'Month','yAxisName':'In Percentage','numberPrefix':'$','stack100Percent':'1','showPercentValues':'0','theme':'management'},categories:[{category:[]}],dataset:[{seriesName:'Purchase',showValues:'0',data:[]},{seriesName:'Labour',showValues:'0',data:[]},{seriesName:'Lease',showValues:'0',data:[]}]}},averageShippingTime:{type:'bar2d',id:'averageShippingTime',width:'473',height:'340',dataFormat:'json',renderAt:'average-shipping-time-chart',dataSource:{chart:{yAxisName:'Time (in days)',theme:'management'},data:[]}},customerSatisfaction:{type:'pie2d',id:'customerSatisfaction',renderAt:'customer-satisfaction-chart',width:'473',height:'340',dataFormat:'json',dataSource:{chart:{showPercentValues:'1',theme:'management'},data:[]}},categoryWiseInventory:{type:'MSCombiDY2D',dataFormat:'json',dataSource:{chart:{numberPrefix:'$',xAxisName:'Products',pYAxisName:'Cost of Inventory (US $ in thousands)',sYAxisName:'Units in Inventory',theme:'management'},categories:[{category:[]}],dataset:[{seriesName:'Cost of Inventory',renderAs:'column',showValues:'0',data:[]},{seriesName:'Units in Inventory',renderAs:'line',showValues:'0',parentYAxis:'S',data:[]}]}}};var employeeDetails=managementData.employeeDetails;App={init:function(callback){callback();}}
chartDataSource={setData:function(datasource,data,_options){var options=typeof _options==='undefined'?false:_options,i,dataLength,formatted,parentValue,parentTitle;datasource.data=[];dataLength=data.length;for(i=0;i<dataLength;i++){formatted=data[i].data;if(typeof formatted.tooltip!=='undefined'){parentTitle=formatted['label'];if(options.tooltipFormatter){parentValue=options.tooltipFormatter(formatted['value']);}else{parentValue=formatted['value'];}
formatted['tooltext']=DataHelpers.formatToolText({title:parentTitle,value:parentValue},formatted.tooltip);delete formatted.tooltip;}
datasource.data.push(formatted);}},setCaption:function(datasource,caption){datasource.chart.caption=caption;},setCategories:function(datasource,categories){datasource.categories[0].category=categories;},setDataSet:function(datasource,dataset){datasource.dataset=dataset;},setDataSetData:function(datasource,data){var i,datasetLength=datasource.dataset.length;for(i=0;i<datasetLength;i++){datasource.dataset[i].data=data[i].data;}}};dom={getElementValue:function(id){var $element=DOCUMENT.getElementById(id);return $element.value;},getById:function(id){return DOCUMENT.getElementById(id);},queryCurrentValue:function(id,obj){if(obj===window){return dom.getElementValue(id);}
return obj.value;}};viewHelpers={addActiveLink:function(id){var $link=dom.getById(id);$link.className='active';},removeActiveLink:function(id){var $link=dom.getById(id);$link.className='';},showModal:function(id,title,_props,callback){var props,chart,i,select,topLevelFilter,charts,selectLength,chartsLength,$modalWrapper=dom.getById('modalWrapper'),$modal=dom.getById('modal'),$title=dom.getById('modal-title');props=_props;$title.innerHTML=title;props.id='modal-inner';props.renderAt='modal';props.width='1068';props.height='500';ChartsInModal[id]={props:props,chart:new FusionCharts(props)};activeModalChart.push(ChartsInModal[id]['chart']);if(isIE6()){select=DOCUMENT.getElementsByTagName('select');topLevelFilter=dom.getById('top-level-select-filter');selectLength=select.length;for(i=0;i<selectLength;i++){select[i].style.visibility='hidden';}
topLevelFilter.style.visibility='hidden';}
setTimeout(function(){callback(ChartsInModal[id]['chart']);},50);charts=getElementsByClassName('fusioncharts-container');chartsLength=charts.length;$modalWrapper.style.display='block';$modalWrapper.style.zIndex='2';eventStates.modalShown=true;}};DataHelpers={slugize:function(_name){var i,name=_name.toLowerCase().split(" ").join("/").split("/"),nameLength,label=[];nameLength=name.length;for(i=0;i<nameLength;i++){if(name[i].trim()){label.push(name[i]);}}
return label.join('_').trim();},numberFilterCategories:function(total,config){var i,totalInt,data=[];if(total==='all'){data=config['all'];}else{totalInt=parseInt(total);for(i=0;i<totalInt;i++){data.push(config['all'][i]);}}
return data;},numberFilterDataSet:function(total,_dataset){var i,totalInt,dataset=_dataset['all'],series1_data={data:[]},series2_data={data:[]};if(total==='all'){series1_data=dataset[0];series2_data=dataset[1];}else{totalInt=parseInt(total);for(i=0;i<totalInt;i++){series1_data.data.push(dataset[0].data[i]);series2_data.data.push(dataset[1].data[i]);}}
return[series1_data,series2_data];},numberFilterData:function(total,_data){var i,totalInt,data=_data['all'],result=[];if(total==='all'){result=data;}else{totalInt=parseInt(total);for(i=0;i<totalInt;i++){result.push(data[i]);}}
return result;},formatToolText:function(parent,obj){var key,html=[],result;for(key in obj){html.push(key+' - '+obj[key]);}
result=parent.title+' - '+parent.value+
'<div class="tooltip-border"></div><div class="tooltip-content">'+html.join('<br>')+'</div>';return result;},tooltipFormatters:{averageShippingTimeChart:function(data){return data+' days';}}};dashboards={items:{},active:null,currentYear:null,add:function(id,callback){this.items[id]={rendered:false,callback:callback,currentYear:currentYear};},run:function(id){var self=this;FusionCharts.ready(function(){dom.getById(id).className='';self.items[id].rendered=true;self.items[id].callback();viewHelpers.addActiveLink(id+'-'+'link');self.active=id;self.items[id].currentYear=currentYear;});},show:function(id){var self=this,$element,$activeElement,$link,redraw=false;if(this.items[this.active].rendered){if(currentYear!=this.items[id].currentYear){redraw=true;this.items[id].currentYear=currentYear;}}
for(var key in this.items){$element=dom.getById(key);viewHelpers.addActiveLink(key+'-'+'link');$link=dom.getById(key+'-'+'link');if(key!==id){$element.style.display='none';$link.className='';}else{this.active=key;$activeElement=$element;}}
$activeElement.style.display='block';if(!this.items[this.active].rendered){this.run(this.active);}
if(redraw){this.redraw(id);}},redraw:function(id){FusionCharts.ready(function(){var ids=getEventIds(id);eventListeners.trigger('change',function(e){eventHandlers.trigger.topLevelYearFilter(ids,{trigger:e,year:currentYear,eventName:'change'});});});}};eventStates={modalShown:false,isModalOpened:function(){return this.modalShown;},isModalClosed:function(){return!this.isModalOpened();}};eventListeners={add:function(id,eventName,callback,_isObject){var isObject=typeof _isObject==='undefined'?false:_isObject,$element;if(isObject){$element=id;}else{$element=DOCUMENT.getElementById(id);}
if($element.addEventListener){$element.addEventListener(eventName,callback);}else if($element.attachEvent){$element.attachEvent('on'+eventName,callback);}},trigger:function(eventType,callback){var mouseEvent;if(DOCUMENT.createEvent){mouseEvent=DOCUMENT.createEvent('MouseEvent');mouseEvent.initEvent(eventType,true,true);callback(mouseEvent);}else if(DOCUMENT.createEventObject){mouseEvent=DOCUMENT.createEventObject();callback(mouseEvent);}}};eventHandlers={trigger:{topLevelYearFilter:function(ids,options){var i,idLength,$element;idLength=ids.length;for(i=0;i<idLength;i++){$element=dom.getById(ids[i]);$element.value=options.year;if($element.dispatchEvent){$element.dispatchEvent(options.trigger);}else if($element.fireEvent){$element.fireEvent('on'+options.eventName,options.trigger);}}}},stopPropagation:function(e){if(e.stopPropagation){e.stopPropagation();}else if(e.returnValue){e.returnValue=false;}
if(window.event){if(window.event.cancelBubble!=='undefined'){window.event.cancelBubble=true;}}}};function insertTable(tableId,tableClass,id,year){var i,contents="<table class='"+tableClass+"' id='"+tableId+"'>",displayvalue="",value=0,fontColor="",currentYear=typeof year==='undefined'?'2014':year;for(i=0;i<managementData[id+'Data'][currentYear].length;i++){displayvalue=managementData[id+'Data'][currentYear][i].data.displayvalue;value=managementData[id+'Data'][currentYear][i].data.value;fontColor=getValueColor(id,value);formatedValue=FusionCharts.formatNumber(+value,{formatNumberScale:'0',numberPrefix:'$'});if(i%2==0)
contents+='<tr>';else
contents+='<tr class="even-row">';contents+='<td><div class="iMap '+displayvalue+'"></div></td>';contents+='<td>'+displayvalue+'</td>';contents+='<td><p class="mapCountryValue" style="background-color: #'+
fontColor+'">'+formatedValue+'</p></td>';contents+='</tr>';}
contents+='</table>';return contents;}
function getValueColor(id,value){var i,limitArrLength,limitArr=chartConfig[id].dataSource.colorrange.color,color='';limitArrLength=limitArr.length;for(i=0;i<limitArrLength;i++){if(value>=+limitArr[i].minvalue&&value<=+limitArr[i].maxvalue){color=limitArr[i].code;break;}}
return color;}
function loadMapData(year){var NATableHoder=dom.getById('NATableHolder'),SATableHoder=dom.getById('SATableHolder'),europeTableHoder=dom.getById('europeTableHolder'),currentYear=typeof year==='undefined'?'2014':year;NATableHoder.innerHTML=insertTable('NAMapTable','mapTable','NASales',currentYear);SATableHoder.innerHTML=insertTable('SAMapTable','mapTable','SASales',currentYear);europeTableHoder.innerHTML=insertTable('europeMapTable','mapTable','europeSales',currentYear);}
eventListeners.add('close-modal','click',function(e){var i,chartTitle=dom.getById('modal-title'),modalWrapper=dom.getById('modalWrapper'),geographyTitle=dom.getById('geography-title-holder');if(activeModalChart){modalChartLength=activeModalChart.length;for(i=0;i<modalChartLength;i++)
activeModalChart[i].dispose();activeModalChart=[];}
chartTitle.style.display='block';if(geographyTitle){geographyTitle.parentNode.removeChild(geographyTitle);}
modalWrapper.style.display='none';modalWrapper.style.zIndex=0;eventStates.modalShown=false;if(isIE6()){var i,topLevelFilter=dom.getById('top-level-select-filter'),select=DOCUMENT.getElementsByTagName('select'),selectLength;selectLength=select.length;for(i=0;i<selectLength;i++){select[i].style.visibility='';}
topLevelFilter.style.visibility='';}});eventListeners.add('global_year_filter','change',function(){var year=dom.queryCurrentValue('global_year_filter',this);currentYear=year;dashboards.items[dashboards.active].currentYear=currentYear;eventListeners.trigger('change',function(e){eventHandlers.trigger.topLevelYearFilter(getEventIds(dashboards.active),{trigger:e,year:currentYear,eventName:'change'});});});eventListeners.add('modalWrapper','click',function(e){var $closeModal;if(!ie6){eventHandlers.stopPropagation(e);$closeModal=dom.getById('close-modal');if(eventStates.isModalOpened()){eventListeners.trigger('click',function(e){if($closeModal.dispatchEvent){$closeModal.dispatchEvent(e);}else if($closeModal.fireEvent){$closeModal.fireEvent('onclick',e);}});}}});eventListeners.add('modal','click',eventHandlers.stopPropagation);eventListeners.add('modal-title','click',eventHandlers.stopPropagation);dashboards.add('summary',function(){var yearlySalesChart,yearlySalesChartConfig=chartConfig.yearlySalesSummary;var topSalesPerformers,topSalesPerformersChartConfig=chartConfig.topSalesPerformersSummary,topSalesPerformersSummaryCategories=managementData.topSalesPerformersSummaryCategories,topSalesPerformersSummaryData=managementData.topSalesPerformersSummaryData,salesByCategoryChartConfig=managementData.salesByCategory;var topProductsSummaryChart,topProductsSummaryChartConfig=chartConfig.topProductsSummary,topProductsSummaryCategories=managementData.topProductsSummaryCategories,topProductsSummaryData=managementData.topProductsSummaryData;var topRevenuesCountriesSummaryChart,topRevenuesCountriesSummaryChartConfig=chartConfig.topRevenuesCountriesSummary,topRevenuesCountriesSummaryCategories=managementData.topRevenuesCountriesSummaryCategories,topRevenuesCountriesSummaryData=managementData.topRevenuesCountriesSummaryData;var topRevenuesCitiesSummaryChart,topRevenuesCitiesSummaryChartConfig=chartConfig.topRevenuesCitiesSummary,topRevenuesCitiesSummaryData=managementData.topRevenuesCitiesSummaryData;yearlySalesChart=new FusionCharts(yearlySalesChartConfig);yearlySalesChart.render();chartDataSource.setCategories(topSalesPerformersChartConfig.dataSource,DataHelpers.numberFilterCategories(3,topSalesPerformersSummaryCategories[startYear]));chartDataSource.setDataSetData(topSalesPerformersChartConfig.dataSource,DataHelpers.numberFilterDataSet(3,topSalesPerformersSummaryData[startYear]));topSalesPerformersChart=new FusionCharts(topSalesPerformersChartConfig);topSalesPerformersChart.render();chartDataSource.setCategories(topProductsSummaryChartConfig.dataSource,DataHelpers.numberFilterCategories(5,topProductsSummaryCategories[startYear]));chartDataSource.setDataSetData(topProductsSummaryChartConfig.dataSource,DataHelpers.numberFilterDataSet(5,topProductsSummaryData[startYear]));topProductsSummaryChart=new FusionCharts(topProductsSummaryChartConfig);topProductsSummaryChart.render();chartDataSource.setCategories(topRevenuesCountriesSummaryChartConfig.dataSource,DataHelpers.numberFilterCategories(5,topRevenuesCountriesSummaryCategories[currentYear]));chartDataSource.setDataSetData(topRevenuesCountriesSummaryChartConfig.dataSource,DataHelpers.numberFilterDataSet(5,topRevenuesCountriesSummaryData[startYear]));topRevenuesCountriesSummaryChart=new FusionCharts(topRevenuesCountriesSummaryChartConfig);topRevenuesCountriesSummaryChart.render();chartDataSource.setData(topRevenuesCitiesSummaryChartConfig.dataSource,DataHelpers.numberFilterData(5,topRevenuesCitiesSummaryData[startYear]));topRevenuesCitiesSummaryChart=new FusionCharts(topRevenuesCitiesSummaryChartConfig);topRevenuesCitiesSummaryChart.render();eventListeners.add('top_sales_performers_summary_year_filter','change',function(){var year=dom.queryCurrentValue('top_sales_performers_summary_year_filter',this),numberOfEmployees=dom.getElementValue('top_sales_performers_summary_number_filter');chartDataSource.setCategories(topSalesPerformersChartConfig.dataSource,DataHelpers.numberFilterCategories(numberOfEmployees,topSalesPerformersSummaryCategories[year]));chartDataSource.setDataSetData(topSalesPerformersChartConfig.dataSource,DataHelpers.numberFilterDataSet(numberOfEmployees,topSalesPerformersSummaryData[year]));topSalesPerformersChart.setJSONData(topSalesPerformersChartConfig.dataSource);});eventListeners.add('top_sales_performers_summary_number_filter','change',function(){var numberOfEmployees=dom.getElementValue('top_sales_performers_summary_number_filter',this),year=dom.getElementValue('top_sales_performers_summary_year_filter');chartDataSource.setCategories(topSalesPerformersChartConfig.dataSource,DataHelpers.numberFilterCategories(numberOfEmployees,topSalesPerformersSummaryCategories[year]));chartDataSource.setDataSetData(topSalesPerformersChartConfig.dataSource,DataHelpers.numberFilterDataSet(numberOfEmployees,topSalesPerformersSummaryData[year]));topSalesPerformersChart.setJSONData(topSalesPerformersChartConfig.dataSource);});eventListeners.add('top_products_summary_year_filter','change',function(){var year=dom.queryCurrentValue('top_products_summary_year_filter',this),numberOfProducts=dom.getElementValue('top_products_summary_number_filter');chartDataSource.setCategories(topProductsSummaryChartConfig.dataSource,DataHelpers.numberFilterCategories(numberOfProducts,topProductsSummaryCategories[year]));chartDataSource.setDataSetData(topProductsSummaryChartConfig.dataSource,DataHelpers.numberFilterDataSet(numberOfProducts,topProductsSummaryData[year]));topProductsSummaryChart.setJSONData(topProductsSummaryChartConfig.dataSource);});eventListeners.add('top_products_summary_number_filter','change',function(){var numberOfProducts=dom.queryCurrentValue('top_products_summary_number_filter',this),year=dom.getElementValue('top_products_summary_year_filter');chartDataSource.setCategories(topProductsSummaryChartConfig.dataSource,DataHelpers.numberFilterCategories(numberOfProducts,topProductsSummaryCategories[year]));chartDataSource.setDataSetData(topProductsSummaryChartConfig.dataSource,DataHelpers.numberFilterDataSet(numberOfProducts,topProductsSummaryData[year]));topProductsSummaryChart.setJSONData(topProductsSummaryChartConfig.dataSource);});eventListeners.add('top_revenues_country_year_filter','change',function(){var year=dom.queryCurrentValue('top_revenues_country_year_filter',this),numberOfCountires=parseInt(dom.getElementValue('top_revenues_country_number_filter'));chartDataSource.setCategories(topRevenuesCountriesSummaryChartConfig.dataSource,DataHelpers.numberFilterCategories(numberOfCountires,topRevenuesCountriesSummaryCategories['2014']));chartDataSource.setDataSetData(topRevenuesCountriesSummaryChartConfig.dataSource,DataHelpers.numberFilterDataSet(numberOfCountires,topRevenuesCountriesSummaryData[year]));topRevenuesCountriesSummaryChart.setJSONData(topRevenuesCountriesSummaryChartConfig.dataSource);});eventListeners.add('top_revenues_country_number_filter','change',function(){var numberOfCountires=dom.queryCurrentValue('top_revenues_country_number_filter',this),year=parseInt(dom.getElementValue('top_revenues_country_year_filter'));chartDataSource.setCategories(topRevenuesCountriesSummaryChartConfig.dataSource,DataHelpers.numberFilterCategories(numberOfCountires,topRevenuesCountriesSummaryCategories['2014']));chartDataSource.setDataSetData(topRevenuesCountriesSummaryChartConfig.dataSource,DataHelpers.numberFilterDataSet(numberOfCountires,topRevenuesCountriesSummaryData[year]));topRevenuesCountriesSummaryChart.setJSONData(topRevenuesCountriesSummaryChartConfig.dataSource);});eventListeners.add('top_revenues_cities_summary_year_filter','change',function(){var year=dom.queryCurrentValue('top_revenues_cities_summary_year_filter',this),numberOfCities=dom.getElementValue('top_revenues_cities_summary_number_filter');chartDataSource.setData(topRevenuesCitiesSummaryChartConfig.dataSource,DataHelpers.numberFilterData(numberOfCities,topRevenuesCitiesSummaryData[year]));topRevenuesCitiesSummaryChart.setJSONData(topRevenuesCitiesSummaryChartConfig.dataSource);});eventListeners.add('top_revenues_cities_summary_number_filter','change',function(){var numberOfCities=dom.queryCurrentValue('top_revenues_cities_summary_number_filter',this),year=dom.getElementValue('top_revenues_cities_summary_year_filter');chartDataSource.setData(topRevenuesCitiesSummaryChartConfig.dataSource,DataHelpers.numberFilterData(numberOfCities,topRevenuesCitiesSummaryData[year]));topRevenuesCitiesSummaryChart.setJSONData(topRevenuesCitiesSummaryChartConfig.dataSource);});});dashboards.add('sales',function(){var topCategoriesSalesTabChart,topCategoriesSalesTabChartConfig=chartConfig.topCategoriesSalesTab,topCategoriesSalesTabCategories=managementData.topCategoriesSalesTabCategories,topCategoriesSalesTabData=managementData.topCategoriesSalesTabData;var topPerformersSalesTabChart,topPerformersSalesTabChartConfig=chartConfig.topPerformersSalesTab,topPerformersSalesTabData=managementData.topPerformersSalesTabData;var topMonthlySalesTabChart,topMonthlySalesTabChartConfig=chartConfig.topMonthlySalesTab,topMonthlySalesData=managementData.topMonthlySalesTabData,topMonthlySalesTabCategories=managementData.topMonthlySalesTabCategories;var categoryWiseSalesChart,categoryWiseSalesChartConfig=chartConfig.categoryWiseSales,categoryWiseSalesCategories=managementData.productWiseSalesCategories,categoryWiseSalesData=managementData.productWiseSalesData;var singleSalePerformerSalesTabChart,singleSalePerformerSalesTabConfig=chartConfig.singleSalePerformerSalesTab,singleSalePerformerSalesTabCategories=managementData.singleSalePerformerSalesTabCategories,singleSalePerformerSalesTabData=managementData.singleSalePerformerSalesTabData;chartDataSource.setData(topCategoriesSalesTabChartConfig.dataSource,topCategoriesSalesTabData[currentYear]);topCategoriesSalesChart=new FusionCharts(topCategoriesSalesTabChartConfig);topCategoriesSalesChart.render();chartDataSource.setData(topPerformersSalesTabChartConfig.dataSource,topPerformersSalesTabData[currentYear]);topPerformersSalesTabChart=new FusionCharts(topPerformersSalesTabChartConfig);topPerformersSalesTabChart.render();chartDataSource.setCategories(singleSalePerformerSalesTabConfig.dataSource,singleSalePerformerSalesTabCategories);chartDataSource.setCategories(topMonthlySalesTabChartConfig.dataSource,topMonthlySalesTabCategories);chartDataSource.setDataSetData(topMonthlySalesTabChartConfig.dataSource,topMonthlySalesData[currentYear]);topMonthlySalesTabChart=new FusionCharts(topMonthlySalesTabChartConfig);topMonthlySalesTabChart.render();eventListeners.add(topPerformersSalesTabChart,'dataplotClick',function(){var employeeSlug=DataHelpers.slugize(arguments[1]['categoryLabel']);chartDataSource.setDataSetData(singleSalePerformerSalesTabConfig.dataSource,singleSalePerformerSalesTabData[employeeSlug]);viewHelpers.showModal('singleSalePerformerSalesTabChart','Sales Details of '+
employeeDetails[employeeSlug]['name'],singleSalePerformerSalesTabConfig,function(chart){chart.render();});},true);eventListeners.add('top_monthly_sales_year_filter','change',function(){var year=dom.queryCurrentValue('top_monthly_sales_year_filter',this);chartDataSource.setDataSetData(topMonthlySalesTabChartConfig.dataSource,topMonthlySalesData[year]);topMonthlySalesTabChart.setJSONData(topMonthlySalesTabChartConfig.dataSource);});eventListeners.add('top_categories_sales_tab_year_filter','change',function(){var year=dom.queryCurrentValue('top_categories_sales_tab_year_filter',this);chartDataSource.setData(topCategoriesSalesTabChartConfig.dataSource,topCategoriesSalesTabData[year]);topCategoriesSalesChart.setJSONData(topCategoriesSalesTabChartConfig.dataSource);});eventListeners.add('top_performers_sales_year_filter','change',function(){var year=dom.queryCurrentValue('top_performers_sales_year_filter',this);chartDataSource.setData(topPerformersSalesTabChartConfig.dataSource,topPerformersSalesTabData[year]);topPerformersSalesTabChart.setJSONData(topPerformersSalesTabChartConfig.dataSource);});eventListeners.add(topCategoriesSalesChart,'dataplotClick',function(){var year=dom.getById('top_categories_sales_tab_year_filter').value,label=DataHelpers.slugize(arguments[1].categoryLabel);chartDataSource.setCategories(categoryWiseSalesChartConfig.dataSource,categoryWiseSalesCategories[year][label]);chartDataSource.setDataSetData(categoryWiseSalesChartConfig.dataSource,categoryWiseSalesData[year][label]);viewHelpers.showModal('categoryWiseSalesChart',arguments[1].categoryLabel+
' Sales',categoryWiseSalesChartConfig,function(chart){chart.render();});},true);});dashboards.add('geography',function(){var northAmericaSalesChart,northAmericaSalesChartConfig=chartConfig.NASales,northAmericaSalesChartData=managementData.NASalesData;var southAmericaSalesChart,southAmericaSalesChartConfig=chartConfig.SASales,southAmericaSalesChartData=managementData.SASalesData;var europeSalesChart,europeSalesChartConfig=chartConfig.europeSales,europeSalesChartData=managementData.europeSalesData;function showCountryLevelDataFromMap(){if(arguments[1].value){var year=dom.getById(this.getMapName()+'_year_filter').value,currentCountry=arguments[1].label,label=arguments[1].shortLabel,topCitiesSalesChartConfig=chartConfig.topCitiesSales,topCitiesSalesChartCategories=managementData['topCitiesSales'+
label+'Categories'],topCitiesSalesChartData=managementData['topCitiesSales'+
label+'Data'],topCitiesCustomersChartConfig=chartConfig.topCitiesCustomers,topCitiesCustomersCategories=managementData['topCitiesCustomers'+
label+'Categories'],topCitiesCustomersChartData=managementData['topCitiesCustomers'+
label+'Data'];chartDataSource.setCategories(topCitiesSalesChartConfig.dataSource,topCitiesSalesChartCategories[year].all);chartDataSource.setDataSetData(topCitiesSalesChartConfig.dataSource,topCitiesSalesChartData[year].all);chartDataSource.setCategories(topCitiesCustomersChartConfig.dataSource,topCitiesCustomersCategories[year].all);chartDataSource.setDataSetData(topCitiesCustomersChartConfig.dataSource,topCitiesCustomersChartData[year].all);viewHelpers.showModal('topCitiesSales'+label,'',topCitiesSalesChartConfig,function(chart){var modalWrapper,modalDiv,titleHolder,modalFirstHolder,modalFirstHeading,modalFirstChart,modaSecondHolder,modalSecondChart,modalSecondHeading,topCitiesCustomersChart,props,chartTitle;modalWrapper=dom.getById('modalWrapper');modalDiv=dom.getById('modal');chartTitle=dom.getById('modal-title');chartTitle.style.display='none';modalDiv.innerHTML='';titleHolder=DOCUMENT.createElement('div');titleHolder.id='geography-title-holder';modalFirstHolder=DOCUMENT.createElement('div');modalFirstHolder.className='pull-left chart-category';modalFirstHolder.id='modal-holder-1';modalSecondHolder=DOCUMENT.createElement('div');modalSecondHolder.className='pull-right chart-category no-border';modalSecondHolder.id='modal-holder-2';modalFirstHeading=DOCUMENT.createElement('h3');modalFirstHeading.innerHTML='Top Sales in '+currentCountry+' for '+year;titleHolder.appendChild(modalFirstHeading);modalFirstChart=DOCUMENT.createElement('div');modalFirstChart.id='modal-1';modalFirstHolder.appendChild(modalFirstChart);modalSecondHeading=DOCUMENT.createElement('h3');modalSecondHeading.innerHTML='Top Customers in '+currentCountry+' for '+year;titleHolder.appendChild(modalSecondHeading);modalSecondChart=DOCUMENT.createElement('div');modalSecondChart.id='modal-2';modalSecondChart.className='pull-left'
modalSecondHolder.appendChild(modalSecondChart);modalWrapper.appendChild(titleHolder);modalDiv.appendChild(modalFirstHolder);modalDiv.appendChild(modalSecondHolder);chart.width='474';chart.render('modal-1');props=topCitiesCustomersChartConfig;props.id='modal-inner-2';props.renderAt='modal-2';props.width='484';props.height='500';topCitiesCustomersChart=new FusionCharts(props);topCitiesCustomersChart.render('modal-2');activeModalChart.push(topCitiesCustomersChart);});}}
chartDataSource.setData(northAmericaSalesChartConfig.dataSource,northAmericaSalesChartData[currentYear]);northAmericaSalesChart=new FusionCharts(northAmericaSalesChartConfig);northAmericaSalesChart.render();chartDataSource.setData(southAmericaSalesChartConfig.dataSource,southAmericaSalesChartData[currentYear]);southAmericaSalesChart=new FusionCharts(southAmericaSalesChartConfig);southAmericaSalesChart.render();chartDataSource.setData(europeSalesChartConfig.dataSource,europeSalesChartData[currentYear]);europeSalesChart=new FusionCharts(europeSalesChartConfig);europeSalesChart.render();eventListeners.add('northamerica_year_filter','change',function(){var year=dom.queryCurrentValue('northamerica_year_filter',this),NATableHoder=dom.getById('NATableHolder');chartDataSource.setData(northAmericaSalesChartConfig.dataSource,northAmericaSalesChartData[year]);northAmericaSalesChart.setJSONData(northAmericaSalesChartConfig.dataSource);NATableHoder.innerHTML=insertTable('NAMapTable','mapTable','NASales',year);});eventListeners.add('southamerica_year_filter','change',function(){var year=dom.queryCurrentValue('southamerica_year_filter',this),SATableHoder=dom.getById('SATableHolder');chartDataSource.setData(southAmericaSalesChartConfig.dataSource,southAmericaSalesChartData[year]);southAmericaSalesChart.setJSONData(southAmericaSalesChartConfig.dataSource);SATableHoder.innerHTML=insertTable('SAMapTable','mapTable','SASales',year);});eventListeners.add('europe_year_filter','change',function(){var year=dom.queryCurrentValue('europe_year_filter',this),europeTableHoder=dom.getById('europeTableHolder');chartDataSource.setData(europeSalesChartConfig.dataSource,europeSalesChartData[year]);europeSalesChart.setJSONData(europeSalesChartConfig.dataSource);europeTableHoder.innerHTML=insertTable('EUMapTable','mapTable','europeSales',year);});eventListeners.add(northAmericaSalesChart,'entityClick',showCountryLevelDataFromMap,true);eventListeners.add(southAmericaSalesChart,'entityClick',showCountryLevelDataFromMap,true);eventListeners.add(europeSalesChart,'entityClick',showCountryLevelDataFromMap,true);loadMapData();});dashboards.add('kpi',function(){var inventoryByProductCategoriesChart,inventoryByProductCategoriesChartConfig=chartConfig.inventoryByProductCategories,inventoryByProductCategoriesCategories=managementData.inventoryByProductCategoriesCategories,inventoryByProductCategoriesData=managementData.inventoryByProductCategoriesData;var costOfGoodsSoldChart,costOfGoodsSoldChartConfig=chartConfig.costOfGoodsSold,costOfGoodsSoldCategories=managementData.costOfGoodsSoldCategories,costOfGoodsSoldData=managementData.costOfGoodsSoldData;var averageShippingTimeChart,averageShippingTimeChartConfig=chartConfig.averageShippingTime,averageShippingTimeData=managementData.averageShippingTimeData;var customerSatisfactionChart,customerSatisfactionChartConfig=chartConfig.customerSatisfaction,customerSatisfactionData=managementData.customerSatisfactionData;var categoryWiseInventoryChart,categoryWiseInventoryChartConfig=chartConfig.categoryWiseInventory,categoryWiseInventoryCategories=managementData.productWiseInventoryCategories,categoryWiseInventoryData=managementData.productWiseInventoryData;chartDataSource.setCategories(inventoryByProductCategoriesChartConfig.dataSource,inventoryByProductCategoriesCategories);chartDataSource.setDataSetData(inventoryByProductCategoriesChartConfig.dataSource,inventoryByProductCategoriesData);inventoryByProductCategoriesChart=new FusionCharts(inventoryByProductCategoriesChartConfig);inventoryByProductCategoriesChart.render();chartDataSource.setData(averageShippingTimeChartConfig.dataSource,averageShippingTimeData[currentYear],{tooltipFormatter:DataHelpers.tooltipFormatters.averageShippingTimeChart});averageShippingTimeChart=new FusionCharts(averageShippingTimeChartConfig);averageShippingTimeChart.render();chartDataSource.setCategories(costOfGoodsSoldChartConfig.dataSource,costOfGoodsSoldCategories);chartDataSource.setDataSetData(costOfGoodsSoldChartConfig.dataSource,costOfGoodsSoldData[currentYear]);costOfGoodsSoldChart=new FusionCharts(costOfGoodsSoldChartConfig);costOfGoodsSoldChart.render();chartDataSource.setData(customerSatisfactionChartConfig.dataSource,customerSatisfactionData[currentYear]);customerSatisfactionChart=new FusionCharts(customerSatisfactionChartConfig);customerSatisfactionChart.render();eventListeners.add('inventory_by_categories_year_filter','change',function(){chartDataSource.setData(inventoryByProductCategoriesChartConfig.dataSource,inventoryByProductCategoriesData);inventoryByProductCategoriesChart.setJSONData(inventoryByProductCategoriesChartConfig.dataSource);});eventListeners.add('cost_of_goods_sold_year_filter','change',function(){var year=dom.queryCurrentValue('cost_of_goods_sold_year_filter',this);chartDataSource.setCategories(costOfGoodsSoldChartConfig.dataSource,costOfGoodsSoldCategories);chartDataSource.setDataSetData(costOfGoodsSoldChartConfig.dataSource,costOfGoodsSoldData[year]);costOfGoodsSoldChart.setJSONData(costOfGoodsSoldChartConfig.dataSource);});eventListeners.add('average_shipping_time_year_filter','change',function(){var year=dom.queryCurrentValue('average_shipping_time_year_filter',this);chartDataSource.setData(averageShippingTimeChartConfig.dataSource,averageShippingTimeData[year],{tooltipFormatter:DataHelpers.tooltipFormatters.averageShippingTimeChart});averageShippingTimeChart.setJSONData(averageShippingTimeChartConfig.dataSource);});eventListeners.add('customer_satisfaction_year_filter','change',function(){var year=dom.queryCurrentValue('customer_satisfaction_year_filter',this);chartDataSource.setData(customerSatisfactionChartConfig.dataSource,customerSatisfactionData[year]);customerSatisfactionChart.setJSONData(customerSatisfactionChartConfig.dataSource);});eventListeners.add(inventoryByProductCategoriesChart,'dataplotClick',function(){var year=dom.getById('inventory_by_categories_year_filter').value,label=DataHelpers.slugize(arguments[1].categoryLabel);chartDataSource.setCategories(categoryWiseInventoryChartConfig.dataSource,categoryWiseInventoryCategories[year][label]);chartDataSource.setDataSetData(categoryWiseInventoryChartConfig.dataSource,categoryWiseInventoryData[year][label]);viewHelpers.showModal('categoryWiseInventoryChart',arguments[1].categoryLabel+
' - Inventory by products',categoryWiseInventoryChartConfig,function(chart){chart.render();});},true);});var getEventIds=function(id){var ids={summary:['top_sales_performers_summary_year_filter','top_revenues_country_year_filter','top_products_summary_year_filter','top_revenues_cities_summary_year_filter'],sales:['top_categories_sales_tab_year_filter','top_performers_sales_year_filter','top_monthly_sales_year_filter'],geography:['northamerica_year_filter','southamerica_year_filter','europe_year_filter'],kpi:['inventory_by_categories_year_filter','cost_of_goods_sold_year_filter','average_shipping_time_year_filter','customer_satisfaction_year_filter']};return ids[id];};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};var indexOfArray=function(list,value){var i,listLength;if(Array.prototype.indexOf){return list.indexOf(value);}else{listLength=list.length;for(i=0;i<listLength;i++){if(list[i]===value){return i;}}}
return-1;};var getElementsByClassName=function(tag,className){var i,result,elements,elementLength;if(DOCUMENT.getElementsByClassName){result=DOCUMENT.getElementsByClassName('fusioncharts-container');}else{result=[];elements=DOCUMENT.getElementsByTagName(tag);elementLength=elements.length;for(i=0;i<elementLength;i++){if(elements[i].className===className){result.push(elements[i]);}}}
return result;};function isIE6(){return(ieVersion>0&&ieVersion<7)?true:false;}
function isLessThan8(){return(ieVersion>0&&ieVersion<=8)?true:false;}
function getIEVersion(){var pattern=/MSIE (\d+\.\d+);/;if(pattern.test(window.navigator.userAgent)){return new Number(RegExp.$1);}
return 0;}
var urlHandler=function(){var tab,availableTabs,pattern=/#([^#]+)/;tab=DOCUMENT.URL?DOCUMENT.URL.match(pattern):window.location.match(pattern);availableTabs=['summary','sales','geography','kpi'];if(tab){if(indexOfArray(availableTabs,tab[1].trim())===-1){dashboards.run('summary');}else{dashboards.run(tab[1]);}}else{dashboards.run('summary');}};App.init(function(){eventListeners.add('summary-link','click',function(e){dashboards.show('summary');});eventListeners.add('sales-link','click',function(e){dashboards.show('sales');});eventListeners.add('geography-link','click',function(e){dashboards.show('geography');});eventListeners.add('kpi-link','click',function(e){dashboards.show('kpi');});urlHandler();});});